; PlatformIO Project Configuration – FaceGuard Pro (ESP32-CAM)
; Board: AI-Thinker ESP32-CAM  |  Framework: Arduino + ESP-IDF

[env:esp32cam]
platform    = espressif32@5.1.0
board       = esp32cam
framework   = arduino, espidf

; ── Partition table ──────────────────────────────────────────────────────────
; Needs more than the default 1.2 MB app space for face recognition libs + HTML
board_build.partitions = partitions/huge_app.csv

; ── Serial monitor ───────────────────────────────────────────────────────────
monitor_speed = 115200
monitor_rts   = 0
monitor_dtr   = 0
monitor_filters = colorize, time

; ── Dependencies ─────────────────────────────────────────────────────────────
lib_deps =
    bblanchon/ArduinoJson @ ^6.21.3
    greiman/SdFat @ ^2.2.3

; ── Build flags ──────────────────────────────────────────────────────────────
build_flags =
    -D BOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    ;
    ; ── SdFat v2 configuration ────────────────────────────────────────────────
    ; SDFAT_FILE_TYPE=1  → compile FAT16/FAT32 only (SdFat32 / File32).
    ;                      exFAT excluded to save flash; all ESP32-CAM cards
    ;                      are FAT32.  LFN is enabled via USE_LONG_FILE_NAMES.
    -D SDFAT_FILE_TYPE=1
    ;
    ; USE_LONG_FILE_NAMES=255 → allow filenames up to 255 characters on FAT32.
    -D USE_LONG_FILE_NAMES=255
    ;
    ; NOTE: ENABLE_SDIO_CLASS is intentionally absent.  SdFat's SdioConfig /
    ; FIFO_SDIO are Teensy-only.  The ESP32-CAM SD card is driven via SPI
    ; (SdSpiConfig) in initSD() using the MMC pins in 1-bit mode.
    ;
    ; Uncomment to enable detailed face-recognition logging:
    ; -D CONFIG_ESP_FACE_DETECT_ENABLED=1
    ; -D CONFIG_ESP_FACE_RECOGNITION_ENABLED=1
    ;
    ; Increase HTTP task stack if you see stack overflows in logs:
    ; -D CONFIG_HTTPD_MAX_REQ_HDR_LEN=1024

; ── Source filter ─────────────────────────────────────────────────────────────
; PlatformIO picks up src/*.cpp automatically.

; ── Upload (adjust port as needed) ───────────────────────────────────────────
; upload_port   = COM3
; upload_speed  = 921600
